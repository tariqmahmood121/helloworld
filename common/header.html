<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<!-- TM Create TOPIC BUTTON  -->
<script type="text/discourse-plugin" version="0.4">
    api.decorateWidget('header-buttons:after', helper => {
        if (Discourse.User.current()) {
            const createTopic = function() {
                const Composer = require('discourse/models/composer').default;
                const composerController = Discourse.__container__.lookup('controller:composer');
                composerController.open({ action: Composer.CREATE_TOPIC, draftKey: Composer.DRAFT });
            }
            
            return helper.h(
                
                'button#newcase', {
                className: "btn btn-text btn-danger create ember-view",
                title: "Add Case",
                onclick: createTopic,}, 'Click to Start a Discussion!'  // ''-this is 'text' for the button, change as needed.
            );  
        }
    });
    
    
    
</script>

<script type="text/discourse-plugin" version="0.8">
  api.addNavigationBarItem({
    name: "link-to-movies-category",
    displayName: "movies",
    href: "/c/movies",
    title: "link title"
  })
</script>


<!--Show "Create" button in the Header (only for authenticated users) -->
<script type="text/discourse-plugin" version="0.4">
    api.decorateWidget('header-buttons:after', helper => {
        if (Discourse.User.current()) {
            const createTopic = function() {
                const Composer = require('discourse/models/composer').default;
                const composerController = Discourse.__container__.lookup('controller:composer');
                composerController.open({ action: Composer.CREATE_TOPIC, draftKey: Composer.DRAFT });
            }
            return helper.h('button#create-new', {
                className: "btn fa fa-comment-o",
                title: "Create",
                onclick: createTopic
            }, '' );  // ''-this is 'text' for the button, change as needed.
        }
    });
</script>

<!-- EEND OF ABOVE CODE   -->


<!-- TM OWN WIDGET chnage -->
<script type="text/discourse-plugin" version="0.8">
  const h = require("virtual-dom").h;

  api.createWidget("my-first-widget", {
    tagName: "div.my-widget",

    html() {
      return h('h1', "Hello World!");
    }
  });
</script>


<script type="text/x-handlebars" data-template-name="/connectors/above-footer/inject-widget">
  {{mount-widget widget="my-first-widget"}}
</script>

<!-- EEND OF ABOVE CODE   -->





<!-- WIDGET chnage to add button to toolbar for entering text for posts  -->
<script type="text/discourse-plugin" version="0.8">
  const currentLocale = I18n.currentLocale();
  if (!I18n.translations[currentLocale].js.composer) {
    I18n.translations[currentLocale].js.composer = {};
  }
  I18n.translations[currentLocale].js.composer.my_button_text = "Hey there!";
  I18n.translations[currentLocale].js.my_button_title = "My Button!";

  api.onToolbarCreate(function(toolbar) {
    toolbar.addButton({
      trimLeading: true,
      id: "tmButtonID",
      group: "insertions",
      icon: 'heart',
      title: "my_button_title",
      perform: function(e) {
        return e.applySurround(
          '<div data-theme="foo">\n\n',
          "\n\n</div>",
          "my_button_text"
        );
      }
    });
  });
</script>


<!-- END OF Plugin chnage to add button to toolbar for entering text for posts  -->

<script type="text/x-handlebars" data-template-name="/connectors/topic-above-post-stream/foobar">
  <div style="height: 200px; width: 200px;background: red"></div>
</script>

<script type="text/x-handlebars" data-template-name="/connectors/topic-above-post-stream/foobar">
  <div style="height: 200px; width: 200px;background: red"></div>
</script>

<script type="text/x-handlebars" data-template-name="/connectors/category-title-before/foobar2">
  <div style="height: 25px; width: 25px;background: red"></div>
</script>

<script type="text/discourse-plugin" version="0.8">
    console.log(Discourse)
</script>


<script type="text/discourse-plugin" version="0.8">
  const settings = Discourse.SiteSettings,
    taggingEnabled = settings.tagging_enabled,
    title = settings.title;

  if (taggingEnabled) {
    console.log("Yay! "+title+" has tagging enabled!")
  } else {
    console.log("Ohh nooos! "+title+"Does not allow tagging.")
  }
</script>


<script type="text/discourse-plugin" version="0.8">
  const user = api.getCurrentUser();
  
  console.log(user)
</script>


<script type="text/discourse-plugin" version="0.8">
  $( document ).ready(function() {
    const user = api.getCurrentUser(),
      username = user.username;

    $('h1.hello-world').html('Hello there '+username+"!")
  });
</script>

